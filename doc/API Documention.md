# API 文档

## 文檔說明


## 版本記錄

|序號|版本|更新內容|更新時間|操作人|審核人|
|:--:|:---|:---|:---|:---|:---|
|1|V1.0.0|創建文檔|2018-06-17|Cloud.d||

## 錯誤碼列表

### 通用錯誤碼

* 1 請求成功
* 0 請求失敗
* 1001 操作失敗，請稍後嘗試
* 1002 參數錯誤
* 1003 邏輯事務錯誤

### 詳細錯誤碼
* 10000 用户不存在
* 10001 输入金额异常
* 10002 账户余额不足
* 10003 非会员用户
* 10004 资金账户不存在
* 10005 用户身份异常
* 10006 资金密码错误
* 10007 登录密码错误
* 10008 参数错误,修改失败
* 10009 该域名未注册
* 10010 用户名已存在
* 10011 该银行卡已被绑定
* 10012 企业银行卡不存在
* 10012 用户银行卡不存在
* 10013 银行卡未锁定
* 10013 银行卡未解锁
* 10014 解密失败
* 10015 该域名已被占用,请使用其他域名
* 10016 数据异常
* 10017 默认主域名禁止删除
* 10018 未设置用户洗码
* 10019 域名格式错误
* 10020 平台维护或升级中！请联系客服咨询
* 10021 用户名或密码错误
* 10022 游戏API系统异常
* 10023 账号或密码错误
* 10024 第三方即时支付账号不存在
* 10025 游戏类型错误
* 10026 未知的API许可
* 10027 该域名已被禁用
* 10028 用户名长度需大于6位,小于12位
* 10029 该银行卡需大于16位,小于19位
* 10030 您每天的提款次数为{0}笔,今天的提款次数已达到上限
* 10031 您每天的提款上限为{0}元,今天的提款金额已达到上限
* 10032 该品牌不存在
* 10033 {0}参数类型不存在
* 10034 未启用该游戏，请联系客服
* 10035 下分失败
* 10036 暂不支持
* 10037 非代理用户
* 10038 开户名称不得包含数字
* 10039 账号已禁用
* 100391 账号尚未激活，请先激活！
* 10040 不得出现中文汉字或中文标点符号的全角字符
* 10041 为确保取款操作成功，只能按10的倍数取款[整数]，个位数必须是0
* 10050 您是信用代用户，充值取款请联系您的上级代理！
* 10050 游戏密码同步中
* 10051 短信验证码错误
* 10052 该手机号已注册过
* 10053 元宝账户不存在

### 遊戲接口錯誤碼
* 0 成功
* -1 失敗
* 100 賬號已存在
* 1000 系统错误，请检查系统日志
* 1001 接口调用错误
* 1002 参数错误
* 1003 逻辑事务异常
* 1004 不支持的接口
* 10000 用户长度不能超过30位
* 10001 用户密码必须是8位数的数字
* 10002 缺少必须的参数，请检查

## API接口

### 接口說明

#### 加密方式
API請求採用[AES加密]和[MD5簽名]兩種方式

#### 請求參數
* params, 加密業務參數, 將業務參數的鍵值對(key=value)以&連接后, 進行AES加密, 再做URLEncode處理
* signature, 業務參數簽名, 將業務參數的鍵值對(key=value)以&連接后, 緊接MD5密匙, 然後做MD5簽名
* enterprisecode, 每個企業編碼, 用于配对对应的AES秘鑰與MD5秘鑰

 AES秘鑰與MD5秘鑰, 由平台生成, 每一個企業編碼對應一對AES秘鑰與MD5秘鑰

#### API請求樣例
* originParams = "name=Lancelot&gender=male&age=30&job=saber";
* params = URLEncoder(AES(originParams, AES_KEY));
* signature = MD5(originParams + MD5_KEY);

請求鏈接: ```http://域名/路徑?params=${params}&signature=${signature}&enterprisecode=${enterprisecode}```

#### 返回數據
接口返回數據為Json格式, 主要包含code與info兩個主要值

* 當code值為1時, 表示請求成功, 那麼info里的值就是具體的數據

```
{
"code" : "1",
"info" : Object
}
```

* 當code值不為1時, 表示出現錯誤, 那麼info里的值就是錯誤信息

```
{
"code" : "1001",
"info" : "操作失敗，請稍後嘗試"
}
```
--------------------------------------------------
**注: 以下接中的[參數]都是業務參數, 需要加密以及簽名**
### 會員站點相關接口

#### 获取公司对应的key
此接口為固定通信接口, 加密/簽名的秘鑰為固定的系統給出, 並且需要用次對秘鑰對返回的結果進行解密/驗簽, 
返回的數據為: ${MD5_KEY}&${AES_KEY}, 的加密與簽名, 需要前端進行解密/驗簽

```
路徑: Domain/enterpriseInfo
參數: enterprisecode=${企業編碼}
返回結果: {
    "params" : ${params},
    "signature" : ${signature}
}
示例:
```
#### 获取所有网站标识
```
路徑: Domain/TakeAllDomainConfig
參數: enterprisecode=${企業編碼}
返回結果:
示例:
```
#### 获取单个网站标识
```
路徑: Domain/TakeDomainConfig
參數: domain=${查詢的會員站點域名}
返回結果: 
示例:
```
#### 系统公告
```
路徑: Notic/Notic
參數: enterprisecode=${企業編碼}&brandcode=${品牌編碼}&start=${分頁}&limit=${數量}
返回結果:
示例:
```
#### 企业联络方式
```
路徑: Domain/Contact
參數: brandcode=${品牌编码}
返回結果:
示例:
```
#### 获取手机验证码
```
路徑: User/getVerifycode
參數:
返回結果:
示例:
```
#### 获取品牌广告图
```
路徑: EnterpriseBrand/banner
參數:
返回結果:
示例:
```
--------------------------------------------------
### 會員玩家相關接口

#### 注册
```
路徑: User/register
參數: brandcode=${品牌编码}&loginaccount=${用户名}&loginpassword=${登陸密碼}&fundpassword=${資金密碼}&displayalias=${玩家暱稱}&domain=${註冊地址}
返回結果:
示例:
```
#### 登录
```
路徑: User/login
參數: loginaccount=${用戶名}&loginpassword=${登陸密碼}&loginip=${登陸IP}&browserversion=${瀏覽器信息}&opratesystem=${操作系統信息}
返回結果:
示例:
```

#### 根据用户编号获取用户信息
```
路徑: User/takeEmployee
參數: employeecode=${用户编码}
返回結果:
示例:
```
#### 修改登录密码
```
路徑: User/updatepwd
參數: employeecode=${用户编码}&oldloginpassword=${原始密碼}&newloginpassword=${新密碼}
返回結果:
示例:
```
#### 修改资金密码
```
路徑: User/updatefpwd
參數:
返回結果:
示例:
```
#### 更新会员信息
```
路徑: User/updateInfo
參數:
返回結果:
示例:
```
#### 获取会员等级
```
路徑: User/findEmployeeLovel
參數:
返回結果:
示例:
```
#### 用户未读站内信数量
```
路徑: UserMessage/MessageCount
參數:
返回結果:
示例:
```
#### 用户未读站内信数量
```
路徑: UserMessage/SysMessage
參數:
返回結果:
示例:
```
#### 用户读取站内信的
```
路徑: UserMessage/updateSysMessage
參數:
返回結果:
示例:
```
--------------------------------------------------
### 遊戲相關接口

#### 进入游戏
```
路徑: Game/play
參數:
返回結果:
示例:
```
#### 所有游戏余额
```
路徑: Game/balances
參數:
返回結果:
示例:
```
#### 单个游戏余额
```
路徑: Game/balance
參數:
返回結果:
示例:
```
#### 游戏试玩
```
路徑: Game/tryPlay
參數:
返回結果:
示例:
```
#### 获取游戏平台状态
```
路徑: Game/gamestatus
參數:
返回結果:
示例:
```
#### 获取游戏账号
```
路徑: User/takeEmployeeAccountOne
參數:
返回結果:
示例:
```
#### 获取全部游戏账号
```
路徑: User/takeEmployeeAccount
參數:
返回結果:
示例:
```
#### 获取PT游戏分类
```
路徑: Game/PtGameMenu
參數:
返回結果:
示例:
```
#### 获取PT游戏分类详细信息
```
路徑: Game/PtGameDetailsMenu
參數:
返回結果:
示例:
```
#### 获取PT账号
```
路徑: Game/PtLogin
參數:
返回結果:
示例:
```
#### 游戏纪录
```
路徑: GRecords/Records
參數:
返回結果:
示例:
```
#### 游戏手动上分接口
```
路徑: Game/upIntegralGame
參數:
返回結果:
示例:
```
#### 游戏手动下分接口
```
路徑: Game/downIntegralGame
參數:
返回結果:
示例:
```
#### 可用的游戏列表
```
路徑: GRecords/BrandGameAll
參數:
返回結果:
示例:
```
--------------------------------------------------
### 資金相關接口

#### 添加用户银行卡
```
路徑: User/AddUBankCard
參數:
返回結果:
示例:
```
#### 编辑银行卡
```
路徑: User/EditUBankCard
參數:
返回結果:
示例:
```
#### 删除银行卡
```
路徑: User/DeleteUBankCard
參數:
返回結果:
示例:
```
#### 查询银行卡
```
路徑: User/UBankCards
參數:
返回結果:
示例:
```
#### 用户存款
```
路徑: Funds/Saving
參數:
返回結果:
示例:
```
#### 用户取款
```
路徑: Funds/Taking
參數:
返回結果:
示例:
```
#### 存款记录
```
路徑: Fetch/SaveOrder
參數:
返回結果:
示例:
```
#### 取款记录
```
路徑: Fetch/TakeOrder
參數:
返回結果:
示例:
```
#### 用户账变记录
```
路徑: User/findAccountChange
參數:
返回結果:
示例:
```
#### 获取收款银行
```
路徑: Funds/EBankCards
參數:
返回結果:
示例:
```
#### 获取基础银行信息
```
路徑: Funds/Banks
參數:
返回結果:
示例:
```
#### 获取获取企业第三方支付
```
路徑: TPayment/EThirdpartys
參數:
返回結果:
示例:
```
#### 获取企业第三方支付银行
```
路徑: TPayment/TPayMentBank
參數:
返回結果:
示例:
```
#### 提交第三方支付
```
路徑: TPayment/ESaving
參數:
返回結果:
示例:
```
#### 中心钱包金额
```
路徑: Game/balancesAll
參數:
返回結果:
示例:
```
--------------------------------------------------
### 活動相關接口

#### 领取优惠活动
```
路徑: MemBerActivity/trigger
參數:
返回結果:
示例:
```
#### 获取优惠活动数据
```
路徑: ActivityData/trigger
參數:
返回結果:
示例:
```
#### 获取优惠记录数据
```
路徑: ActivityData/benefitRecord
參數:
返回結果:
示例:
```
#### 获取优惠活动内容
```
路徑: BrandActivity/trigger
參數:
返回結果:
示例:
```
#### 用户存款时的优惠编码
```
路徑: User/findUserFavourable
參數:
返回結果:
示例:
```
#### 查询会员时间段内的存取款、优惠等数据
```
路徑: Game/allMoney
參數:
返回結果:
示例:
```
#### 获取会员注册红包纪录
```
路徑: Redbag/Draw
參數:
返回結果:
示例:
```
--------------------------------------------------
### 其他接口

#### 获取企业注册用户数和月充值数
```
路徑: Statistics/ERegisterSave
參數:
返回結果:
示例:
```
#### 获取用户账号密码模拟登录
```
路徑: User/takeEmployeeLoginaccount
參數:
返回結果:
示例:
```
#### 客户端上分接口
```
路徑: Game/upIntegral
參數:
返回結果:
示例:
```
#### app客户端存款接口
```
路徑: User/takeEmployeeLoginaccount2
參數:
返回結果:
示例:
```
