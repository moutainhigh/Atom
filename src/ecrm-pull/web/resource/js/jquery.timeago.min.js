(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&typeof module.exports==="object"){a(require("jquery"))}else{a(jQuery)}}}(function(d){d.timeago=function(h){if(h instanceof Date){return b(h)}else{if(typeof h==="string"){return b(d.timeago.parse(h))}else{if(typeof h==="number"){return b(new Date(h))}else{return b(d.timeago.datetime(h))}}}};var g=d.timeago;d.extend(d.timeago,{settings:{refreshMillis:60000,allowPast:true,allowFuture:false,localeTitle:false,cutoff:0,autoDispose:true,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"前",suffixFromNow:"从现在开始",inPast:"any moment now",seconds:"不到1分钟",minute:"大约1分钟",minutes:"%d分钟",hour:"大约1小时",hours:"大约%d小时",day:"1天",days:"%d天",month:"大约1个月",months:"%d个月",year:"大约1年",years:"%d年",wordSeparator:"",numbers:[]}},inWords:function(h){if(!this.settings.allowPast&&!this.settings.allowFuture){throw"timeago allowPast and allowFuture settings can not both be set to false."}var p=this.settings.strings;var j=p.prefixAgo;var r=p.suffixAgo;if(this.settings.allowFuture){if(h<0){j=p.prefixFromNow;r=p.suffixFromNow}}if(!this.settings.allowPast&&h>=0){return this.settings.strings.inPast}var q=Math.abs(h)/1000;var k=q/60;var o=k/60;var s=o/24;var m=s/365;function i(u,t){var v=d.isFunction(u)?u(t,h):u;var w=(p.numbers&&p.numbers[t])||t;return v.replace(/%d/i,w)}var n=q<45&&i(p.seconds,Math.round(q))||q<90&&i(p.minute,1)||k<45&&i(p.minutes,Math.round(k))||k<90&&i(p.hour,1)||o<24&&i(p.hours,Math.round(o))||o<42&&i(p.day,1)||s<30&&i(p.days,Math.round(s))||s<45&&i(p.month,1)||s<365&&i(p.months,Math.round(s/30))||m<1.5&&i(p.year,1)||i(p.years,Math.round(m));var l=p.wordSeparator||"";if(p.wordSeparator===undefined){l=" "}return d.trim([j,n,r].join(l))},parse:function(i){var h=d.trim(i);h=h.replace(/\.\d+/,"");h=h.replace(/-/,"/").replace(/-/,"/");h=h.replace(/T/," ").replace(/Z/," UTC");h=h.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");h=h.replace(/([\+\-]\d\d)$/," $100");return new Date(h)},datetime:function(i){var h=g.isTime(i)?d(i).attr("datetime"):d(i).attr("title");return g.parse(h)},isTime:function(h){return d(h).get(0).tagName.toLowerCase()==="time"}});var f={init:function(){var i=d.proxy(c,this);i();var h=g.settings;if(h.refreshMillis>0){this._timeagoInterval=setInterval(i,h.refreshMillis)}},update:function(i){var h=(i instanceof Date)?i:g.parse(i);d(this).data("timeago",{datetime:h});if(g.settings.localeTitle){d(this).attr("title",h.toLocaleString())}c.apply(this)},updateFromDOM:function(){d(this).data("timeago",{datetime:g.parse(g.isTime(this)?d(this).attr("datetime"):d(this).attr("title"))});c.apply(this)},dispose:function(){if(this._timeagoInterval){window.clearInterval(this._timeagoInterval);this._timeagoInterval=null}}};d.fn.timeago=function(h,i){var j=h?f[h]:f.init;if(!j){throw new Error("Unknown function name '"+h+"' for timeago")}this.each(function(){j.call(this,i)});return this};function c(){var h=g.settings;if(h.autoDispose&&!d.contains(document.documentElement,this)){d(this).timeago("dispose");return this}var i=a(this);if(!isNaN(i.datetime)){if(h.cutoff==0||Math.abs(e(i.datetime))<h.cutoff){d(this).text(b(i.datetime))}}return this}function a(h){h=d(h);if(!h.data("timeago")){h.data("timeago",{datetime:g.datetime(h)});var i=d.trim(h.text());if(g.settings.localeTitle){h.attr("title",h.data("timeago").datetime.toLocaleString())}else{if(i.length>0&&!(g.isTime(h)&&h.attr("title"))){h.attr("title",i)}}}return h.data("timeago")}function b(h){return g.inWords(e(h))}function e(h){return(new Date().getTime()-h.getTime())}document.createElement("abbr");document.createElement("time")}));